<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="VarKai" />
	
	
	
	<title>University Fundraising ï½œ Matthew McCarthy-Rechowicz</title>
	
    
    
    <meta name="description" content="Who were the university&amp;rsquo;s top donors?" />
    

    
    
    <meta name="keywords" content="Hugo, theme, zozo" />
    

	
    
    <link rel="shortcut icon" href="https://mmccrechowicz.github.io/public/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://mmccrechowicz.github.io/public/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://mmccrechowicz.github.io/public/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://mmccrechowicz.github.io/public/css/highlight.css" />

    
    
</head>

<body>
    <div class="main">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/public/">Home</a>
            </li>
            
            <li>
                <a href="/public/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/public/tags/">Tags</a>
            </li>
            
            <li>
                <a href="/public/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://mmccrechowicz.github.io/public/">
                    <span>Matthew McCarthy-Rechowicz</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title"></p>
            <div class="my_socials">
                
                
                <a href="https://github.com/mmccrechowicz" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://www.linkedin.com/in/matthewmccarthyrechowicz/" title="linkedin" target="_blank"><i class="ri-linkedin-fill"></i></a>
                
                
                <a href="https://mmccrechowicz.github.io/public/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>

        <div class="content">
            <div class="post_page">
                <div class="post">
                    <div class="post_title post_detail_title">
                        <h2><a href='/public/posts/university_donations/'>University Fundraising</a></h2>
                        <span class="date">2020.12.23</span>
                    </div>
                    <div class="post_content markdown"><p>This analysis uses data from a university&rsquo;s development department to understand more about the donors who have given money to the university. This type of analysis could help the development department/alumni relations team answer some of the questions they might have about their work, such as:</p>
<ul>
<li>Who are the donors and how much do they give?</li>
<li>What makes someone likely to be a donor? E.g. are people with particular majors particular likely to donate?</li>
<li>Did outreach and campaigns have any effect on donations?</li>
<li>Which demographics should the alumni relations team target and when?</li>
<li>Which donors should the alumni relations team cultivate because they are or could become major benefactors?</li>
<li>Does the alumni relations team need to do more to engage with alumni, or with any particular demographics within alumni?</li>
</ul>
<p>The original dataset can be downloaded <a href="https://public.tableau.com/s/sites/default/files/media/advancement_donations_and_giving_demo.xls">here</a>.</p>
<h2 id="set-up">Set up</h2>
<h3 id="define-functions">Define functions</h3>
<details>
<summary>Code</summary>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">request</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

<span class="c1">#%load_ext google.colab.data_table</span>

<span class="c1"># Set float display options for pandas dataframes.</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s2">&#34;{:,.2f}&#34;</span><span class="o">.</span><span class="n">format</span>

<span class="k">def</span> <span class="nf">excel_dataset_to_sqlite</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&#34;:memory:&#34;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Connection</span><span class="p">:</span>
  <span class="s2">&#34;&#34;&#34;Downloads an excel dataset and loads it into an sqlite database.&#34;&#34;&#34;</span>

  <span class="c1"># Download the data into a local variable.</span>
  <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

  <span class="c1"># Write it out to afiles</span>
  <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryFile</span><span class="p">()</span> <span class="k">as</span> <span class="n">fle</span><span class="p">:</span>
    <span class="n">fle</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Read into pandas from excel file.</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">fle</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

  <span class="c1"># Create a database.</span>
  <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database_name</span><span class="p">)</span>

  <span class="c1"># Loads data from pandas objects into individual tables.</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">sheet</span><span class="p">)</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">sheet</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">notnull</span><span class="p">(</span><span class="n">sheet</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">sheet</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">conn</span><span class="p">)</span>


  <span class="c1"># Return database.</span>
  <span class="k">return</span> <span class="n">conn</span>

</code></pre></div></details>
<h3 id="prepare-the-data">Prepare the data</h3>
<h4 id="import-the-dataset-and-create-the-database">Import the dataset and create the database</h4>
<p>I&rsquo;m importing a dataset from a URL.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">database</span> <span class="o">=</span> <span class="n">excel_dataset_to_sqlite</span><span class="p">(</span><span class="s2">&#34;https://public.tableau.com/s/sites/default/files/media/advancement_donations_and_giving_demo.xls&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>/Users/Matthew/Library/Caches/pypoetry/virtualenvs/notebooks-iGyxaocD-py3.8/lib/python3.8/site-packages/pandas/core/generic.py:2779: UserWarning: The spaces in these column names will not be changed. In pandas versions &lt; 0.14, spaces were converted to underscores.
  sql.to_sql(
</code></pre>
<h4 id="view-the-table-names-to-make-sure-the-correct-tables-have-been-created">View the table names to make sure the correct tables have been created</h4>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
    <span class="s2">&#34;&#34;&#34;SELECT name FROM sqlite_master WHERE type=&#39;table&#39;;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>GiftRecords</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GraduationYear</td>
    </tr>
  </tbody>
</table>
</div>
<h4 id="the-table-names-look-fine-but-what-about-the-column-names">The table names look fine. But what about the column names?</h4>
<p>The column names have spaces, which will make them annoying to work with in SQL queries. So, let&rsquo;s change the names to make queries easier.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Select * From GiftRecords
</span><span class="s2">            LIMIT 5;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>Allocation Subcategory</th>
      <th>City</th>
      <th>College</th>
      <th>Gift Allocation</th>
      <th>Gift Amount</th>
      <th>Gift Date</th>
      <th>Major</th>
      <th>Prospect ID</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>College of Natural Science</td>
      <td>Denver</td>
      <td>College of Natural Science</td>
      <td>Scholarship</td>
      <td>5,088.00</td>
      <td>2010-07-28 00:00:00</td>
      <td>Biological Science Interdepartmental</td>
      <td>1000</td>
      <td>CO</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>College of Natural Science</td>
      <td>San Francisco</td>
      <td>College of Social Science</td>
      <td>Scholarship</td>
      <td>3,793.00</td>
      <td>2010-09-10 00:00:00</td>
      <td>Human Development and Family Studies</td>
      <td>1001</td>
      <td>CA</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Minority Scholarship Fund</td>
      <td>Los Angeles</td>
      <td>College of Business</td>
      <td>Scholarship</td>
      <td>2,952.00</td>
      <td>2010-06-30 00:00:00</td>
      <td>Accounting</td>
      <td>1002</td>
      <td>CA</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>College of Communication Arts and Sciences</td>
      <td>Mesa</td>
      <td>College of Natural Science</td>
      <td>Scholarship</td>
      <td>2,872.00</td>
      <td>2010-11-23 00:00:00</td>
      <td>Mathematics</td>
      <td>1003</td>
      <td>AZ</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Diversity Fund</td>
      <td>West Valley City</td>
      <td>College of Social Science</td>
      <td>Endowment</td>
      <td>2,022.00</td>
      <td>2010-10-10 00:00:00</td>
      <td>Psychology</td>
      <td>1004</td>
      <td>UT</td>
    </tr>
  </tbody>
</table>
</div>
<p>We can change the column names which have spaces.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GiftRecords
</span><span class="s2">             Rename Column `Allocation Subcategory` To Allocation_Subcategory;&#34;&#34;&#34;</span><span class="p">)</span>

<span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GiftRecords
</span><span class="s2">             Rename Column `Gift Allocation` To Gift_Allocation;&#34;&#34;&#34;</span><span class="p">)</span>

<span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GiftRecords
</span><span class="s2">             Rename Column `Gift Amount` To Gift_Amount;&#34;&#34;&#34;</span><span class="p">)</span>

<span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GiftRecords
</span><span class="s2">             Rename Column `Gift Date` To Gift_Date;&#34;&#34;&#34;</span><span class="p">)</span>

<span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GiftRecords
</span><span class="s2">             Rename Column `Prospect ID` To Prospect_ID;&#34;&#34;&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>&lt;sqlite3.Cursor at 0x11aae39d0&gt;
</code></pre>
<p>And then check that the changes went through.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;PRAGMA table_info(GiftRecords);&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cid</th>
      <th>name</th>
      <th>type</th>
      <th>notnull</th>
      <th>dflt_value</th>
      <th>pk</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>index</td>
      <td>INTEGER</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Allocation_Subcategory</td>
      <td>TEXT</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>City</td>
      <td>TEXT</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>College</td>
      <td>TEXT</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Gift_Allocation</td>
      <td>TEXT</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>5</td>
      <td>Gift_Amount</td>
      <td>REAL</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>6</td>
      <td>Gift_Date</td>
      <td>TIMESTAMP</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>7</td>
      <td>Major</td>
      <td>TEXT</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>Prospect_ID</td>
      <td>INTEGER</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>9</td>
      <td>State</td>
      <td>TEXT</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
<p>There&rsquo;s a second table in this database, so we can do the same to the columns in this table.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Select * From GraduationYear
</span><span class="s2">            LIMIT 5;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>Prospect ID</th>
      <th>Year of Graduation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1515</td>
      <td>1970</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1588</td>
      <td>1992</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>2508</td>
      <td>1984</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>2589</td>
      <td>1981</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>3012</td>
      <td>1993</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GraduationYear
</span><span class="s2">             Rename Column `Prospect ID` To Prospect_ID;&#34;&#34;&#34;</span><span class="p">)</span>

<span class="n">database</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;Alter Table GraduationYear
</span><span class="s2">             Rename Column `Year of Graduation` To Graduation_Year;&#34;&#34;&#34;</span><span class="p">)</span>
</code></pre></div><pre><code>&lt;sqlite3.Cursor at 0x105492f80&gt;
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;PRAGMA table_info(GraduationYear);&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>cid</th>
      <th>name</th>
      <th>type</th>
      <th>notnull</th>
      <th>dflt_value</th>
      <th>pk</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>index</td>
      <td>INTEGER</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Prospect_ID</td>
      <td>INTEGER</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Graduation_Year</td>
      <td>INTEGER</td>
      <td>0</td>
      <td>None</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="understand-the-data">Understand the data</h2>
<p>From the above queries, it&rsquo;s clear we can join the two tables in the database on the &lsquo;Prospect_ID&rsquo; field. Let&rsquo;s do that and see what the joined tables look like.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT * From GiftRecords
</span><span class="s2">LEFT JOIN GraduationYear ON GiftRecords.Prospect_ID = GraduationYear.Prospect_ID
</span><span class="s2">LIMIT 5;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>index</th>
      <th>Allocation_Subcategory</th>
      <th>City</th>
      <th>College</th>
      <th>Gift_Allocation</th>
      <th>Gift_Amount</th>
      <th>Gift_Date</th>
      <th>Major</th>
      <th>Prospect_ID</th>
      <th>State</th>
      <th>index</th>
      <th>Prospect_ID</th>
      <th>Graduation_Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>College of Natural Science</td>
      <td>Denver</td>
      <td>College of Natural Science</td>
      <td>Scholarship</td>
      <td>5,088.00</td>
      <td>2010-07-28 00:00:00</td>
      <td>Biological Science Interdepartmental</td>
      <td>1000</td>
      <td>CO</td>
      <td>871</td>
      <td>1000</td>
      <td>1993</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>College of Natural Science</td>
      <td>San Francisco</td>
      <td>College of Social Science</td>
      <td>Scholarship</td>
      <td>3,793.00</td>
      <td>2010-09-10 00:00:00</td>
      <td>Human Development and Family Studies</td>
      <td>1001</td>
      <td>CA</td>
      <td>1128</td>
      <td>1001</td>
      <td>1991</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Minority Scholarship Fund</td>
      <td>Los Angeles</td>
      <td>College of Business</td>
      <td>Scholarship</td>
      <td>2,952.00</td>
      <td>2010-06-30 00:00:00</td>
      <td>Accounting</td>
      <td>1002</td>
      <td>CA</td>
      <td>630</td>
      <td>1002</td>
      <td>1989</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>College of Communication Arts and Sciences</td>
      <td>Mesa</td>
      <td>College of Natural Science</td>
      <td>Scholarship</td>
      <td>2,872.00</td>
      <td>2010-11-23 00:00:00</td>
      <td>Mathematics</td>
      <td>1003</td>
      <td>AZ</td>
      <td>2233</td>
      <td>1003</td>
      <td>1983</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Diversity Fund</td>
      <td>West Valley City</td>
      <td>College of Social Science</td>
      <td>Endowment</td>
      <td>2,022.00</td>
      <td>2010-10-10 00:00:00</td>
      <td>Psychology</td>
      <td>1004</td>
      <td>UT</td>
      <td>1778</td>
      <td>1004</td>
      <td>1986</td>
    </tr>
  </tbody>
</table>
</div>
<p>There are 3913 rows of data in the GiftRecords table. Selecting the unique values from the table shows that, for example, there are 25 Allocation_Subcategories donors can choose from, and that 95 cities, 120 majors, and 2317 individual donors are represented in the data.</p>
<p>There are only 2 Gift_Allocations categories, so it won&rsquo;t be possible to do detailed analysis using this field.</p>
<p>The data cover 6 years.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">With years As (SELECT substr(Gift_Date, 1, 4) as year
</span><span class="s2">                              From GiftRecords)
</span><span class="s2">
</span><span class="s2">Select Count(Distinct Allocation_Subcategory) As Allocation_Subcategories,
</span><span class="s2">       Count(Distinct City) As Cities,
</span><span class="s2">       Count(Distinct College) As Colleges,
</span><span class="s2">       Count(Distinct Gift_Allocation) As Gift_Allocations,
</span><span class="s2">       Count(Distinct Major) As Majors,
</span><span class="s2">       Count(Distinct Prospect_ID) As Prospects,
</span><span class="s2">       Count(Distinct State) As States,
</span><span class="s2">       Count(Distinct year) As years
</span><span class="s2">From GiftRecords
</span><span class="s2">Join years;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Allocation_Subcategories</th>
      <th>Cities</th>
      <th>Colleges</th>
      <th>Gift_Allocations</th>
      <th>Majors</th>
      <th>Prospects</th>
      <th>States</th>
      <th>years</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>25</td>
      <td>95</td>
      <td>12</td>
      <td>3</td>
      <td>120</td>
      <td>2317</td>
      <td>40</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
<h2 id="analyze-the-data">Analyze the data</h2>
<h3 id="how-much-did-the-university-raise-each-year">How much did the university raise each year?</h3>
<p>The chart below shows total donations for each of the six years in the data.</p>
<p>Looking at the annual average donations made, there is no clear pattern or trend; rather we see fluctuations from year to year. Donations peaked in 2013 before falling in the two subsequent years.</p>
<p>It would be interesting to know whether the development team ran any initiatives or campaigns in 2013 that could explain that year&rsquo;s high level of donations, especially after 2012, which saw the lowest annual donations among the years covered.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT substr(Gift_Date, 1, 4) AS Year, 
</span><span class="s2">       SUM(Gift_Amount), 
</span><span class="s2">       COUNT(Gift_Amount)
</span><span class="s2">FROM GiftRecords
</span><span class="s2">GROUP BY Year;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1</span><span class="n">_000_000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Annual Gift Amount, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($m)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_26_0.png" alt="png"></p>
<h3 id="what-is-the-distribution-of-gifts">What is the distribution of gifts?</h3>
<p>We looked at the data earlier, so we know there are 3913 unique gift records in the data.</p>
<p>To understand these gifts at a basic level, we can look at the distribution of gifts among different gift amounts.</p>
<p>By bucketing the gifts in this way, it is clear that the vast majority of gifts are below \$10k, with only a small percentage above \$20k.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &lt;= 5000 THEN 1 END) AS [Less Than $5k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 5000 AND Gift_Amount &lt;= 10000 THEN 1 END) AS [$5k-$10k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 10000 AND Gift_Amount &lt;= 20000 THEN 1 END) AS [$10k-$20k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 20000 AND Gift_Amount &lt;= 30000 THEN 1 END) AS [$20k-$30k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 30000 AND Gift_Amount &lt;= 40000 THEN 1 END) AS [$30k-$40k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 40000 AND Gift_Amount &lt;= 50000 THEN 1 END) AS [$40k-$50k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 50000 AND Gift_Amount &lt;= 100000 THEN 1 END) AS [$50k-$100k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 100000 AND Gift_Amount &lt;= 200000 THEN 1 END) AS [$100k-$200k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 200000 AND Gift_Amount &lt;= 300000 THEN 1 END) AS [$200k-$300k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 300000 AND Gift_Amount &lt;= 400000 THEN 1 END) AS [$300k-$400k],
</span><span class="s2">    COUNT(CASE WHEN Gift_Amount &gt; 400000 AND Gift_Amount &lt;= 500000 THEN 1 END) AS [$400k-$500k]
</span><span class="s2">FROM GiftRecords;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Number of Gifts By Amount, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;Gift Amount ($)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Number of Gifts&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">1710</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;Less Than $5k&#34;</span><span class="p">,</span> <span class="mi">1760</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">1796</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$5k-$10k&#34;</span><span class="p">,</span> <span class="mi">1846</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">333</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$10k-$20k&#34;</span><span class="p">,</span> <span class="mi">383</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$20k-$30k&#34;</span><span class="p">,</span> <span class="mi">102</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$30k-$40k&#34;</span><span class="p">,</span> <span class="mi">58</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$40k-$50k&#34;</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$50k-$100k&#34;</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$100k-$200k&#34;</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$200k-$300k&#34;</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$300k-$400k&#34;</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">xy</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;$400k-$500k&#34;</span><span class="p">,</span> <span class="mi">51</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_29_0.png" alt="png"></p>
<h4 id="largest-gifts-in-each-year">Largest gifts in each year</h4>
<p>From the chart above, we know who the top overall donors are.</p>
<p>But what does this look like on an annual basis? We can find the top five largest gifts each year to see if there are any patterns.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT * FROM (SELECT Prospect_ID, 
</span><span class="s2">               CAST(Gift_Amount AS INT) AS Gift_Amount,
</span><span class="s2">               substr(Gift_Date, 1, 4) as Year,
</span><span class="s2">               RANK () OVER (PARTITION BY substr(Gift_Date, 1, 4) ORDER BY Gift_Amount DESC) donor_rank
</span><span class="s2">               From GiftRecords)
</span><span class="s2">WHERE donor_rank &lt;= 5;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">subset_first</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;donor_rank&#34;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">subset_second</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;donor_rank&#34;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">subset_third</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;donor_rank&#34;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">subset_fourth</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;donor_rank&#34;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">subset_fifth</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;donor_rank&#34;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">5</span><span class="p">]</span>
<span class="c1">#subset_sixth = result[result[&#34;donor_rank&#34;] == 6]</span>

<span class="n">x_first</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subset_first</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]))</span>
<span class="n">x_second</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subset_second</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]))</span>
<span class="n">x_third</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subset_third</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]))</span>
<span class="n">x_fourth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subset_fourth</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]))</span>
<span class="n">x_fifth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">subset_fifth</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]))</span>
<span class="c1">#x_sixth = np.arange(len(subset_sixth[&#34;Year&#34;]))</span>

<span class="n">y_first</span> <span class="o">=</span> <span class="n">subset_first</span><span class="p">[</span><span class="s2">&#34;Gift_Amount&#34;</span><span class="p">]</span>
<span class="n">y_second</span> <span class="o">=</span> <span class="n">subset_second</span><span class="p">[</span><span class="s2">&#34;Gift_Amount&#34;</span><span class="p">]</span>
<span class="n">y_third</span> <span class="o">=</span> <span class="n">subset_third</span><span class="p">[</span><span class="s2">&#34;Gift_Amount&#34;</span><span class="p">]</span>
<span class="n">y_fourth</span> <span class="o">=</span> <span class="n">subset_fourth</span><span class="p">[</span><span class="s2">&#34;Gift_Amount&#34;</span><span class="p">]</span>
<span class="n">y_fifth</span> <span class="o">=</span> <span class="n">subset_fifth</span><span class="p">[</span><span class="s2">&#34;Gift_Amount&#34;</span><span class="p">]</span>
<span class="c1">#y_sixth = subset_sixth[&#34;Gift_Amount&#34;]</span>
<span class="n">width</span> <span class="o">=</span> <span class="mf">0.15</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">rects1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x_first</span> <span class="o">-</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">y_first</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;2010&#34;</span><span class="p">)</span>
<span class="n">rects2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x_second</span> <span class="o">-</span> <span class="mf">0.15</span><span class="p">,</span> <span class="n">y_second</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;2011&#34;</span><span class="p">)</span>
<span class="n">rects3</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x_third</span> <span class="o">+</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">y_third</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;2012&#34;</span><span class="p">)</span>
<span class="n">rects4</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x_fourth</span> <span class="o">+</span> <span class="mf">0.15</span><span class="p">,</span> <span class="n">y_fourth</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;2013&#34;</span><span class="p">)</span>
<span class="n">rects5</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x_fifth</span> <span class="o">+</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">y_fifth</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;2014&#34;</span><span class="p">)</span>
<span class="c1">#rects6 = ax.bar(x_sixth + 1.05, y_sixth, width, label=&#34;2015&#34;)</span>

<span class="c1"># Add some text for labels, title and custom x-axis tick labels, etc.</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Gift Value ($)&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">labelpad</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">]))</span>  <span class="c1"># the label locations</span>

<span class="k">def</span> <span class="nf">autolabel</span><span class="p">(</span><span class="n">rects</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;Attach a text label above each bar in *rects*, displaying its height.&#34;&#34;&#34;</span>
    <span class="k">for</span> <span class="n">rect</span> <span class="ow">in</span> <span class="n">rects</span><span class="p">:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&#34;${:,}&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span><span class="p">),</span>
                    <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">rect</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
                    <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>  <span class="c1"># 3 points vertical offset</span>
                    <span class="n">textcoords</span><span class="o">=</span><span class="s2">&#34;offset points&#34;</span><span class="p">,</span>
                    <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">)</span>

<span class="n">autolabel</span><span class="p">(</span><span class="n">rects1</span><span class="p">)</span>
<span class="n">autolabel</span><span class="p">(</span><span class="n">rects2</span><span class="p">)</span>
<span class="n">autolabel</span><span class="p">(</span><span class="n">rects3</span><span class="p">)</span>
<span class="n">autolabel</span><span class="p">(</span><span class="n">rects4</span><span class="p">)</span>
<span class="n">autolabel</span><span class="p">(</span><span class="n">rects5</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Top 5 Gifts, 2010-2015&#39;</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_first</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">subset_first</span><span class="p">[</span><span class="s2">&#34;Year&#34;</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">labelpad</span> <span class="o">=</span> <span class="mi">20</span>
<span class="c1">#ax.legend()</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_32_0.png" alt="png"></p>
<h3 id="most-generous-donors">Most generous donors</h3>
<p>Who are the most generous donors and how much have they given?</p>
<p>Based on the distribution chart, we know that two donors in particular have been very generous to the university, donating more than \$400,000 and \$200,000 respectively in single gifts.</p>
<p>A larger number of donors have also given amounts between \$20,000 and \$100,000.</p>
<p>But who made the largest cumulative donations in the period 2010-2015?</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">With total_donations As (Select Sum(Gift_Amount) as total_donations
</span><span class="s2">                         From GiftRecords)
</span><span class="s2">
</span><span class="s2">Select Distinct(Prospect_ID), 
</span><span class="s2">       SUM(Gift_Amount), 
</span><span class="s2">       total_donations, 
</span><span class="s2">       (SUM(Gift_Amount) / total_donations) AS percentage_of_total
</span><span class="s2">From GiftRecords
</span><span class="s2">Join total_donations
</span><span class="s2">Group By Prospect_ID
</span><span class="s2">Order By Sum(Gift_Amount) DESC
</span><span class="s2">Limit 20;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Prospect_ID&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Top 20 Donors, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;Donor ID&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_35_0.png" alt="png"></p>
<h3 id="most-generous-states">Most generous states</h3>
<p>In which states were alumni the most generous?</p>
<p>Colorado was the most generous state, sending more than $3m in donations to the university. Montana was the least generous state.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span>
<span class="s2">&#34;&#34;&#34;Select State, 
</span><span class="s2">          SUM(Gift_Amount), 
</span><span class="s2">          COUNT(Gift_Amount), 
</span><span class="s2">          SUM(Gift_Amount) / COUNT(Gift_Amount) AS Average_Gift
</span><span class="s2">From GiftRecords
</span><span class="s2">Group By State
</span><span class="s2">Order By SUM(Gift_Amount) DESC;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;State&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1</span><span class="n">_000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Gift Amount By State, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($ &#39;000)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_38_0.png" alt="png"></p>
<p>Let&rsquo;s look at Colorado and Montana in more detail.</p>
<p>Colorado recorded more than 90 times as many gifts as Montana, and an average gift amount that was more than 60% higher than Montana&rsquo;s. The largest gift from a Colorado donor was \$38,052, almost \$30,000 more than the largest gift originating in Montana.</p>
<p>210 individual donors from Colorado made contributions to the univeristy, compared to just 2 from Montana.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT State, 
</span><span class="s2">       COUNT(Gift_Amount) AS Number_of_Gifts, 
</span><span class="s2">       MAX(Gift_Amount) Largest_Gift_Amount,
</span><span class="s2">       AVG(Gift_Amount) Average_Gift_Amount,
</span><span class="s2">       COUNT(DISTINCT City) Number_of_Cities,
</span><span class="s2">       COUNT(DISTINCT Prospect_ID) Number_of_Donors
</span><span class="s2">From GiftRecords
</span><span class="s2">WHERE State = &#39;CO&#39; OR State = &#39;MT&#39;
</span><span class="s2">Group By State;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
<span class="n">result</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>State</th>
      <th>Number_of_Gifts</th>
      <th>Largest_Gift_Amount</th>
      <th>Average_Gift_Amount</th>
      <th>Number_of_Cities</th>
      <th>Number_of_Donors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>CO</td>
      <td>368</td>
      <td>38,052.00</td>
      <td>8,651.94</td>
      <td>2</td>
      <td>210</td>
    </tr>
    <tr>
      <th>1</th>
      <td>MT</td>
      <td>4</td>
      <td>8,481.00</td>
      <td>5,300.50</td>
      <td>1</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="most-generous-cities">Most generous cities</h3>
<p>Colorado was the most generous state, and its capital was the most generous city in the dataset.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">Select City, 
</span><span class="s2">       SUM(Gift_Amount), 
</span><span class="s2">       COUNT(Gift_Amount), 
</span><span class="s2">       SUM(Gift_Amount) / COUNT(Gift_Amount) AS Average_Gift
</span><span class="s2">From GiftRecords
</span><span class="s2">Group By City
</span><span class="s2">Order By SUM(Gift_Amount) DESC
</span><span class="s2">Limit 20;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;City&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1</span><span class="n">_000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Top 20 Cities, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($ &#39;000)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;right&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_44_0.png" alt="png"></p>
<p>Let&rsquo;s look at the data for Denver in more detail. We see that Denver accounts for most of the donations from the state of Colorado: 311 of the 368 total gifts, and 181 of the 210 individual donors from Colorado are from Denver.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT City, 
</span><span class="s2">       COUNT(Gift_Amount) AS Number_of_Gifts, 
</span><span class="s2">       MAX(Gift_Amount) Largest_Gift_Amount,
</span><span class="s2">       AVG(Gift_Amount) Average_Gift_Amount,
</span><span class="s2">       COUNT(DISTINCT City) Number_of_Cities,
</span><span class="s2">       COUNT(DISTINCT Prospect_ID) Number_of_Donors
</span><span class="s2">From GiftRecords
</span><span class="s2">WHERE City = &#39;Denver&#39;
</span><span class="s2">Group By City;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
<span class="n">result</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>City</th>
      <th>Number_of_Gifts</th>
      <th>Largest_Gift_Amount</th>
      <th>Average_Gift_Amount</th>
      <th>Number_of_Cities</th>
      <th>Number_of_Donors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Denver</td>
      <td>311</td>
      <td>38,052.00</td>
      <td>9,184.87</td>
      <td>1</td>
      <td>181</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="most-generous-majors">Most generous majors</h3>
<p>Are donors who studied particular majors more likely to donate money to the university after they graduate?</p>
<p>The chart below shows the top 20 most generous majors. Engineers were the most generous donors to the university, followed by Composition and Mathematics graduates.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">Select Major, 
</span><span class="s2">       SUM(Gift_Amount), 
</span><span class="s2">       COUNT(Gift_Amount), 
</span><span class="s2">       SUM(Gift_Amount) / COUNT(Gift_Amount) AS Average_Gift
</span><span class="s2">From GiftRecords
</span><span class="s2">Group By Major
</span><span class="s2">Order By SUM(Gift_Amount) DESC
</span><span class="s2">LIMIT 25;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Major&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1</span><span class="n">_000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Gift Amount By Major, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($ &#39;000)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;right&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_49_0.png" alt="png"></p>
<p>We can take a closer look at the top three most generous majors.</p>
<p>Although Engineering graduates were the most generous overall, fewer Engineering graduates made gifts than did graduates from Composition or Mathematics. Of the three majors, Composition delivered the highest number of gifts and the highest number of individual donors, but the smallest overall and average gift values.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT Major, 
</span><span class="s2">       COUNT(Gift_Amount) AS Number_of_Gifts, 
</span><span class="s2">       MAX(Gift_Amount) Largest_Gift_Amount,
</span><span class="s2">       AVG(Gift_Amount) Average_Gift_Amount,
</span><span class="s2">       COUNT(DISTINCT Prospect_ID) Number_of_Donors
</span><span class="s2">From GiftRecords
</span><span class="s2">WHERE Major = &#39;Engineering-No Major&#39; 
</span><span class="s2">        OR Major = &#39;Composition&#39; OR Major = &#39;Mathematics&#39;
</span><span class="s2">Group By Major;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
<span class="n">result</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Major</th>
      <th>Number_of_Gifts</th>
      <th>Largest_Gift_Amount</th>
      <th>Average_Gift_Amount</th>
      <th>Number_of_Donors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Composition</td>
      <td>60</td>
      <td>37,080.00</td>
      <td>7,234.15</td>
      <td>37</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Engineering-No Major</td>
      <td>21</td>
      <td>455,821.00</td>
      <td>26,786.60</td>
      <td>14</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Mathematics</td>
      <td>32</td>
      <td>225,843.00</td>
      <td>12,993.22</td>
      <td>18</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="most-popular-gift-allocations">Most popular gift allocations</h3>
<p>Donors were able to direct their gifts to 25 funds or causes within the university. Where did the donations go?</p>
<p>The two most popular donation destinations were non-subject specific: the Diversity Fund and the University Annual Fund.</p>
<p>The College of Natural Science was the third highest overall recipient of donations, and received more donations than any other university faculty.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">Select Allocation_Subcategory, 
</span><span class="s2">       SUM(Gift_Amount), 
</span><span class="s2">       COUNT(Gift_Amount)
</span><span class="s2">From GiftRecords
</span><span class="s2">Group By Allocation_Subcategory
</span><span class="s2">Order By SUM(Gift_Amount) DESC;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Allocation_Subcategory&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1</span><span class="n">_000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Gift Amount By Destination, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($ &#39;000)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;right&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_54_0.png" alt="png"></p>
<p>Let&rsquo;s have a look at the donation profiles for the three funds which received the highest number of donations.</p>
<p>Of these three, the University Annual Fund received the highest number of gifts from the highest number of individual donors. However, this fund had the lowest average gift.</p>
<p>We might assume that the Diversity Fund and the University Annual Fund would attract a more diverse group of donors in terms of the subjects they studied. However, the College of Natural Science had donors from all 12 colleges in the university, as did the other two funds, and had donors from only eight fewer majors than the general funds.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT Allocation_Subcategory, 
</span><span class="s2">       COUNT(Gift_Amount) AS Number_of_Gifts, 
</span><span class="s2">       SUM(Gift_Amount) AS Total_Gift_Amount,
</span><span class="s2">       MAX(Gift_Amount) AS Largest_Gift_Amount,
</span><span class="s2">       AVG(Gift_Amount) AS Average_Gift_Amount,
</span><span class="s2">       COUNT(DISTINCT Prospect_ID) AS Number_of_Donors,
</span><span class="s2">       COUNT(DISTINCT College) AS Number_of_Colleges,
</span><span class="s2">       COUNT(DISTINCT Major) AS Number_of_Majors
</span><span class="s2">From GiftRecords
</span><span class="s2">WHERE Allocation_Subcategory = &#39;Diversity Fund&#39; OR Allocation_Subcategory = &#39;University Annual Fund&#39; OR Allocation_Subcategory = &#39;College of Natural Science&#39;
</span><span class="s2">Group By Allocation_Subcategory;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
<span class="n">result</span>
</code></pre></div><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Allocation_Subcategory</th>
      <th>Number_of_Gifts</th>
      <th>Total_Gift_Amount</th>
      <th>Largest_Gift_Amount</th>
      <th>Average_Gift_Amount</th>
      <th>Number_of_Donors</th>
      <th>Number_of_Colleges</th>
      <th>Number_of_Majors</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>College of Natural Science</td>
      <td>308</td>
      <td>2,106,294.00</td>
      <td>225,843.00</td>
      <td>6,838.62</td>
      <td>280</td>
      <td>12</td>
      <td>105</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Diversity Fund</td>
      <td>351</td>
      <td>2,656,506.50</td>
      <td>455,821.00</td>
      <td>7,568.39</td>
      <td>335</td>
      <td>12</td>
      <td>113</td>
    </tr>
    <tr>
      <th>2</th>
      <td>University Annual Fund</td>
      <td>383</td>
      <td>2,492,738.00</td>
      <td>29,538.00</td>
      <td>6,508.45</td>
      <td>355</td>
      <td>12</td>
      <td>113</td>
    </tr>
  </tbody>
</table>
</div>
<h3 id="when-are-graduates-most-generous">When are graduates most generous?</h3>
<p>The dataset covers donations made between 2010 and 2015 by individuals who graduated from the university between 1960 and 2009.</p>
<p>The first chart shows that, until about 25 years after graduation, graduates get more generous the longer they have been away from the university. After the 25-year mark, they gradually become less generous.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql</span><span class="p">(</span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">SELECT (substr(Gift_Date, 1, 4) - Graduation_Year) AS Years_Since_Graduation, 
</span><span class="s2">       SUM(Gift_Amount),
</span><span class="s2">       COUNT(Gift_Amount),
</span><span class="s2">       SUM(Gift_Amount) / COUNT(Gift_Amount) AS Average_Gift
</span><span class="s2">FROM GiftRecords 
</span><span class="s2">LEFT JOIN GraduationYear On 
</span><span class="s2">        GiftRecords.Prospect_ID = GraduationYear.Prospect_ID
</span><span class="s2">GROUP BY Years_Since_Graduation;&#34;&#34;&#34;</span><span class="p">,</span> <span class="n">database</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Years_Since_Graduation&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;SUM(Gift_Amount)&#34;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1</span><span class="n">_000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Gift Amount By Years Since Graduation, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&#34;Years Since Graduation&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&#34;Total gifts ($ &#39;000)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s2">&#34;center&#34;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_59_0.png" alt="png"></p>
<p>The second chart shows that the average gift does not change significantly over time. Rather, it is the number of gifts that changes significantly over time. The number of gifts increases steadily until the 24th year after graduation, after which there is a steep decline, with the number levelling out at approximately 35 years after graduation.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">fig</span><span class="p">,</span> <span class="n">axis1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Years_Since_Graduation&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">height</span><span class="o">=</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;Average_Gift&#34;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&#34;Average Gift Amount By Years Since Graduation, 2010-2015&#34;</span><span class="p">,</span> <span class="n">pad</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&#34;Years Since Graduation&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&#34;Average Gift ($)&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">axes2</span> <span class="o">=</span> <span class="n">axis1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">axes2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">&#34;COUNT(Gift_Amount)&#34;</span><span class="p">],</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">axes2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&#34;Number of Gifts&#34;</span><span class="p">,</span> <span class="n">labelpad</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">axes2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">axis1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">axis1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">labelsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">axes2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</code></pre></div><p><img src="University_Donations_files/University_Donations_61_0.png" alt="png"></p>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://mmccrechowicz.github.io/public/tags/sql/">SQL</a>
                                    
                                    <a href="https://mmccrechowicz.github.io/public/tags/jupyter/">Jupyter</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                <div class="doc_comments"></div>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span></span>
    </div>
</footer>
    <script src="https://mmccrechowicz.github.io/public/js/jquery-3.5.1.min.js"></script>
<link href="https://mmccrechowicz.github.io/public/css/fancybox.min.css" rel="stylesheet">
<script src="https://mmccrechowicz.github.io/public/js/fancybox.min.js"></script>
<script src="https://mmccrechowicz.github.io/public/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



</body>

</html>
